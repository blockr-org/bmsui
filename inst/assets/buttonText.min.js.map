{"version":3,"file":"buttonText.min.js","sources":["../../srcjs/inputs/buttonText.js"],"sourcesContent":["const revert = (event, cb) => {\n  let $binding = $(event.target).closest(\".buttonTextBinding\");\n  $binding.find(\".d-flex\").toggleClass(\"d-none\");\n  $binding.find(\".btn-trigger-text\").toggleClass(\"d-none\");\n  if ($binding.data(\"restore\")) {\n    $binding.find(\".btn-trigger-text\").text(\n      $binding.find(\".btn-text-input\").val(),\n    );\n  }\n  cb();\n};\n\n$(() => {\n  var buttonTextBinding = new Shiny.InputBinding();\n\n  $.extend(buttonTextBinding, {\n    find: (scope) => {\n      return $(scope).find(\".buttonTextBinding\");\n    },\n    getValue: (el) => {\n      return $(el).find(\".btn-text-input\").val();\n    },\n    setValue: (el, value) => {\n      console.error(\"not implemented\");\n    },\n    subscribe: (el, callback) => {\n      $(el).find(\".btn-trigger-text\").on(\n        \"click\",\n        (e) => {\n          $(e.currentTarget).toggleClass(\"d-none\");\n          $(e.target).closest(\".buttonTextBinding\").find(\".d-flex\").toggleClass(\n            \"d-none\",\n          );\n\n          if ($(e.target).closest(\".buttonTextBinding\").data(\"restore\")) {\n            $(e.target).closest(\".buttonTextBinding\").find(\n              \".btn-text-input\",\n            )\n              .val($(e.currentTarget).text());\n          } else {\n            $(e.target).closest(\".buttonTextBinding\").find(\n              \".btn-text-input\",\n            )\n              .val(\"\");\n          }\n        },\n      );\n\n      $(el).find(\".btn-validate\").on(\n        \"click\",\n        (e) => {\n          revert(e, callback);\n        },\n      );\n\n      $(el).find(\".btn-text-input\").on(\n        \"keydown\",\n        (e) => {\n          if (e.which != 13) {\n            return;\n          }\n\n          revert(e, callback);\n        },\n      );\n\n      $(el).find(\".btn-text-cancel\").on(\n        \"click\",\n        (e) => {\n          let $binding = $(e.target).closest(\".buttonTextBinding\");\n          $binding.find(\".d-flex\").toggleClass(\"d-none\");\n          $binding.find(\".btn-trigger-text\").toggleClass(\"d-none\");\n        },\n      );\n    },\n    unsubscribe: (el) => {\n      $(el).off(\".buttonTextBinding\");\n    },\n  });\n\n  Shiny.inputBindings.register(buttonTextBinding, \"bmsui.buttonTextBinding\");\n});\n"],"names":["revert","event","cb","$binding","$","target","closest","find","toggleClass","data","text","val","buttonTextBinding","Shiny","InputBinding","extend","scope","getValue","el","setValue","value","console","error","subscribe","callback","on","e","currentTarget","which","unsubscribe","off","inputBindings","register"],"mappings":"AAAA,MAAMA,OAAS,CAACC,EAAOC,KACrB,IAAIC,EAAWC,EAAEH,EAAMI,QAAQC,QAAQ,sBACvCH,EAASI,KAAK,WAAWC,YAAY,UACrCL,EAASI,KAAK,qBAAqBC,YAAY,UAC3CL,EAASM,KAAK,YAChBN,EAASI,KAAK,qBAAqBG,KACjCP,EAASI,KAAK,mBAAmBI,OAGrCT,GAAI,EAGNE,GAAE,KACA,IAAIQ,EAAoB,IAAIC,MAAMC,aAElCV,EAAEW,OAAOH,EAAmB,CAC1BL,KAAOS,GACEZ,EAAEY,GAAOT,KAAK,sBAEvBU,SAAWC,GACFd,EAAEc,GAAIX,KAAK,mBAAmBI,MAEvCQ,SAAU,CAACD,EAAIE,KACbC,QAAQC,MAAM,kBAAkB,EAElCC,UAAW,CAACL,EAAIM,KACdpB,EAAEc,GAAIX,KAAK,qBAAqBkB,GAC9B,SACCC,IACCtB,EAAEsB,EAAEC,eAAenB,YAAY,UAC/BJ,EAAEsB,EAAErB,QAAQC,QAAQ,sBAAsBC,KAAK,WAAWC,YACxD,UAGEJ,EAAEsB,EAAErB,QAAQC,QAAQ,sBAAsBG,KAAK,WACjDL,EAAEsB,EAAErB,QAAQC,QAAQ,sBAAsBC,KACxC,mBAECI,IAAIP,EAAEsB,EAAEC,eAAejB,QAE1BN,EAAEsB,EAAErB,QAAQC,QAAQ,sBAAsBC,KACxC,mBAECI,IAAI,GACR,IAILP,EAAEc,GAAIX,KAAK,iBAAiBkB,GAC1B,SACCC,IACC1B,OAAO0B,EAAGF,EAAS,IAIvBpB,EAAEc,GAAIX,KAAK,mBAAmBkB,GAC5B,WACCC,IACgB,IAAXA,EAAEE,OAIN5B,OAAO0B,EAAGF,EAAS,IAIvBpB,EAAEc,GAAIX,KAAK,oBAAoBkB,GAC7B,SACCC,IACC,IAAIvB,EAAWC,EAAEsB,EAAErB,QAAQC,QAAQ,sBACnCH,EAASI,KAAK,WAAWC,YAAY,UACrCL,EAASI,KAAK,qBAAqBC,YAAY,SAAS,GAE3D,EAEHqB,YAAcX,IACZd,EAAEc,GAAIY,IAAI,qBAAqB,IAInCjB,MAAMkB,cAAcC,SAASpB,EAAmB,0BAA0B"}