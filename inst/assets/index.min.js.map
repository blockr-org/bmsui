{"version":3,"file":"index.min.js","sources":["../../srcjs/sidebar/show.js","../../srcjs/sidebar/collapsible.js","../../srcjs/sidebar/insert.js","../../srcjs/sidebar/select.js","../../srcjs/sidebar/index.js","../../srcjs/index.js"],"sourcesContent":["let lastTab = \"\";\nexport const showTab = (name) => {\n  if (lastTab == name) {\n    return;\n  }\n\n  $(`.bms-sidebar-open`).removeClass(\"active\");\n\n  $(\".bms-sidebar-item\")\n    .each((i, tab) => {\n      let $tab = $(tab);\n      let tabName = $tab.data(\"tab\");\n\n      if (tabName == name) {\n        $(`.bms-sidebar-open[data-target='${name}']`).addClass(\"active\");\n        $tab.removeClass(\"d-none\");\n        $tab.trigger(\"shown\");\n        lastTab = name;\n\n        const event = new CustomEvent(\"bms:show-tab\", {\n          detail: $tab.data(\"description\"),\n        });\n        document.dispatchEvent(event);\n\n        return;\n      }\n\n      $tab.addClass(\"d-none\");\n      $tab.trigger(\"hidden\");\n    });\n};\n\nexport const showTabDescription = () => {\n  $(document).off(\"bms:show-tab\");\n\n  $(document).on(\"bms:show-tab\", (e) => {\n    let details = e.detail;\n    if (e.detail == null) {\n      $(\"#bms-sidebar-description\").html(null);\n      return;\n    }\n\n    let desc = `<p class=\"fw-bold mb-0\">Description</p>\n      <hr/ style=\"margin-top:0;margin-bottom:.3rem;\">\n      <div>\n        ${e.detail}\n      </div>`;\n\n    $(\"#bms-sidebar-description\").html(desc);\n  });\n};\n\nexport const listenTabs = () => {\n  $(\".bms-sidebar-open\").off(\"click\");\n\n  $(\".bms-sidebar-open\").on(\"click\", (e) => {\n    let target = $(e.currentTarget).data(\"target\");\n    showTab(target);\n  });\n};\n","export const handleSidebarCollapsible = () => {\n  $(\".bms-sidebar-collapsible-open\").off();\n\n  $(\".bms-sidebar-collapsible-open\").on(\"click\", (e) => {\n    $(e.currentTarget)\n      .find(\".bms-sidebar-collapsible-icon\")\n      .toggleClass(\"fa-chevron-down fa-chevron-up\");\n  });\n}\n","import { listenTabs } from \"./show.js\";\nimport { handleSidebarCollapsible } from \"./collapsible.js\";\n\nexport const handleInsert = () => {\n  window.Shiny.addCustomMessageHandler(\"insert-sidebar-item\", (msg) => {\n    $(sidebarEntry(msg.title, msg.id)).insertAfter(\n      $(\".bms-sidebar-open\").last(),\n    );\n    // we create the tab empty\n    $(\"#bms-tabs\").append(tab(msg));\n\n    // we leverage this to bind inputs/output within tab on initialisation.\n    window.Shiny.renderDependenciesAsync(msg.content.deps).then(() => {\n      window.Shiny.renderContentAsync(\n        $(`[data-tab='${msg.id}']`),\n        msg.content.html,\n      ).then(() => {\n        listenTabs();\n\n        const event = new CustomEvent(\"bms:inserted-tab\", {\n          detail: msg.id,\n        });\n        document.dispatchEvent(event);\n      });\n    });\n  });\n\n  window.Shiny.addCustomMessageHandler(\"insert-sidebar-collapsible\", (msg) => {\n    $(\".bms-sidebar-open\")\n      .last()\n      .insertAfter(sidebarEntryCollapsible(msg.title));\n    handleSidebarCollapsible();\n  });\n\n  window.Shiny.addCustomMessageHandler(\n    \"insert-sidebar-collapsible-item\",\n    (msg) => {\n      $(`[data-id='${msg.target}']`).append(\n        sidebarEntryCollapsibleItem(msg.title),\n      );\n      $(\"#bms-tabs\").append(tab(msg));\n      listenTabs();\n    },\n  );\n};\n\nconst sidebarEntry = (title, id) => {\n  return `<div class='bms-sidebar-open mb-2' data-target='${id}'>${title}</div>`;\n};\n\nconst sidebarEntryCollapsibleItem = (title) => {\n  return `<div class='bms-sidebar-open bms-sidebar-open-collapsible mb-2' data-target='${title}'>${title}</div>`;\n};\n\nconst sidebarEntryCollapsible = (title) => {\n  return `<div class='bms-sidebar-collapsible-open mb-2' data-bs-toggle=\"collapse\" href=\"#${title}\" data-id=\"${title}\">\n    ${title}\n    <i class=\"fas fa-chevron-down float-right bms-sidebar-collapsible-icon\"></i>\n  </div>\n  <div class=\"bms-sidebar-collapsible-content collapse\" id=\"${title}\">\n  </div>`;\n};\n\nconst tab = (params) => {\n  return `<div class='bms-sidebar-item d-none' data-tab='${params.id}'></div>`;\n};\n","import { showTab } from \"./show.js\";\n\nexport const handleSelect = () => {\n  Shiny.addCustomMessageHandler(\"select-sidebar-item\", (msg) => {\n    showTab(msg.title);\n  });\n};\n","import { listenTabs, showTab, showTabDescription } from \"./show.js\";\nimport { handleInsert } from \"./insert.js\";\nimport { handleSelect } from \"./select.js\";\nimport { handleSidebarCollapsible } from \"./collapsible.js\";\n\nconst showFirstTab = () => {\n  let target = $(\".bms-sidebar-open\").first().data(\"target\");\n  showTab(target);\n};\n\nexport const sidebar = () => {\n  showTabDescription();\n  showFirstTab();\n  listenTabs();\n  handleInsert();\n  handleSelect();\n  handleSidebarCollapsible();\n};\n","import { sidebar } from \"./sidebar/index.js\";\n\n$(() => {\n  sidebar();\n});\n"],"names":["lastTab","showTab","name","$","removeClass","each","i","tab","$tab","data","addClass","trigger","event","CustomEvent","detail","document","dispatchEvent","showTabDescription","off","on","e","html","desc","listenTabs","target","currentTarget","handleSidebarCollapsible","find","toggleClass","handleInsert","window","Shiny","addCustomMessageHandler","msg","sidebarEntry","title","id","insertAfter","last","append","renderDependenciesAsync","content","deps","then","renderContentAsync","sidebarEntryCollapsible","sidebarEntryCollapsibleItem","params","handleSelect","showFirstTab","first","sidebar"],"mappings":"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"}