{"version":3,"file":"index.min.js","sources":["../../srcjs/sidebar/show.js","../../srcjs/sidebar/collapsible.js","../../srcjs/sidebar/insert.js","../../srcjs/sidebar/select.js","../../srcjs/sidebar/index.js","../../srcjs/index.js"],"sourcesContent":["let lastTab = \"\";\nexport const showTab = (name) => {\n  if (lastTab == name) {\n    return;\n  }\n\n  $(`.bms-sidebar-open`).removeClass(\"active\");\n\n  $(\".bms-sidebar-item\")\n    .each((i, tab) => {\n      let $tab = $(tab);\n      let tabName = $tab.data(\"tab\");\n\n      if (tabName == name) {\n        $(`.bms-sidebar-open[data-target='${name}']`).addClass(\"active\");\n        $tab.removeClass(\"d-none\");\n        $tab.trigger(\"shown\");\n        lastTab = name;\n\n        const event = new CustomEvent(\"bms:show-tab\", {\n          detail: $tab.data(\"description\"),\n        });\n        document.dispatchEvent(event);\n\n        return;\n      }\n\n      $tab.addClass(\"d-none\");\n      $tab.trigger(\"hidden\");\n    });\n};\n\nexport const showTabDescription = () => {\n  $(document).off(\"bms:show-tab\");\n\n  $(document).on(\"bms:show-tab\", (e) => {\n    let details = e.detail;\n    if (e.detail == null) {\n      $(\"#bms-sidebar-description\").html(null);\n      return;\n    }\n\n    let desc = `<p class=\"fw-bold mb-0\">Description</p>\n      <hr/ style=\"margin-top:0;margin-bottom:.3rem;\">\n      <div>\n        ${e.detail}\n      </div>`;\n\n    $(\"#bms-sidebar-description\").html(desc);\n  });\n};\n\nexport const listenTabs = () => {\n  $(\".bms-sidebar-open\").off(\"click\");\n\n  $(\".bms-sidebar-open\").on(\"click\", (e) => {\n    let target = $(e.currentTarget).data(\"target\");\n    showTab(target);\n  });\n};\n","export const handleSidebarCollapsible = () => {\n  $(\".bms-sidebar-collapsible-open\").off();\n\n  $(\".bms-sidebar-collapsible-open\").on(\"click\", (e) => {\n    $(e.currentTarget)\n      .find(\".bms-sidebar-collapsible-icon\")\n      .toggleClass(\"fa-chevron-down fa-chevron-up\");\n  });\n}\n","import { listenTabs } from \"./show.js\";\nimport { handleSidebarCollapsible } from \"./collapsible.js\";\n\nexport const handleInsert = () => {\n  Shiny.addCustomMessageHandler(\"insert-sidebar-item\", (msg) => {\n    $(sidebarEntry(msg.title)).insertAfter($(\".bms-sidebar-open\").last());\n    // we create the tab empty\n    $(\"#bms-tabs\").append(tab(msg));\n    // we leverage this to bind inputs/output within tab on initialisation.\n    Shiny.renderContentAsync($(`[data-tab='${msg.title}']`), msg.content)\n      .then(() => {\n        listenTabs();\n\n        const event = new CustomEvent(\"bms:inserted-tab\", {\n          detail: msg.title,\n        });\n        document.dispatchEvent(event);\n      });\n  });\n\n  Shiny.addCustomMessageHandler(\"insert-sidebar-collapsible\", (msg) => {\n    $(\".bms-sidebar-open\").last().insertAfter(\n      sidebarEntryCollapsible(msg.title),\n    );\n    handleSidebarCollapsible();\n  });\n\n  Shiny.addCustomMessageHandler(\"insert-sidebar-collapsible-item\", (msg) => {\n    $(`[data-id='${msg.target}']`).append(\n      sidebarEntryCollapsibleItem(msg.title),\n    );\n    $(\"#bms-tabs\").append(tab(msg));\n    listenTabs();\n  });\n};\n\nconst sidebarEntry = (title) => {\n  return `<div class='bms-sidebar-open mb-2' data-target='${title}'>${title}</div>`;\n};\n\nconst sidebarEntryCollapsibleItem = (title) => {\n  return `<div class='bms-sidebar-open bms-sidebar-open-collapsible mb-2' data-target='${title}'>${title}</div>`;\n};\n\nconst sidebarEntryCollapsible = (title) => {\n  return `<div class='bms-sidebar-collapsible-open mb-2' data-bs-toggle=\"collapse\" href=\"#${title}\" data-id=\"${title}\">\n    ${title}\n    <i class=\"fas fa-chevron-down float-right bms-sidebar-collapsible-icon\"></i>\n  </div>\n  <div class=\"bms-sidebar-collapsible-content collapse\" id=\"${title}\">\n  </div>`;\n};\n\nconst tab = (params) => {\n  return `<div class='bms-sidebar-item d-none' data-tab='${params.title}'></div>`;\n};\n","import { showTab } from \"./show.js\";\n\nexport const handleSelect = () => {\n  Shiny.addCustomMessageHandler(\"select-sidebar-item\", (msg) => {\n    showTab(msg.title);\n  });\n};\n","import { listenTabs, showTab, showTabDescription } from \"./show.js\";\nimport { handleInsert } from \"./insert.js\";\nimport { handleSelect } from \"./select.js\";\nimport { handleSidebarCollapsible } from \"./collapsible.js\";\n\nconst showFirstTab = () => {\n  let target = $(\".bms-sidebar-open\").first().data(\"target\");\n  showTab(target);\n};\n\nexport const sidebar = () => {\n  showTabDescription();\n  showFirstTab();\n  listenTabs();\n  handleInsert();\n  handleSelect();\n  handleSidebarCollapsible();\n};\n","import { sidebar } from \"./sidebar/index.js\";\n\n$(() => {\n  sidebar();\n});\n"],"names":["lastTab","showTab","name","$","removeClass","each","i","tab","$tab","data","addClass","trigger","event","CustomEvent","detail","document","dispatchEvent","showTabDescription","off","on","e","html","desc","listenTabs","target","currentTarget","handleSidebarCollapsible","find","toggleClass","handleInsert","Shiny","addCustomMessageHandler","msg","sidebarEntry","title","insertAfter","last","append","renderContentAsync","content","then","sidebarEntryCollapsible","sidebarEntryCollapsibleItem","params","handleSelect","showFirstTab","first","sidebar"],"mappings":"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"}